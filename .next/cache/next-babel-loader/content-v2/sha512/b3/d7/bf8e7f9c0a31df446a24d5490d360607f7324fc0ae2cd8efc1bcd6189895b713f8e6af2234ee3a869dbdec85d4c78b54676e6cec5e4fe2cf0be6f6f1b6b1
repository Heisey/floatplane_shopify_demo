{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\files\\\\school\\\\react\\\\shopify\\\\demo_1\\\\components\\\\cards\\\\Discount\\\\index.js\";\nimport { Buttons } from '../../';\nimport content from './content';\nimport styles from './styles';\nimport { useFormik } from 'formik';\nimport { useSelector } from 'react-redux';\nimport axios from 'axios';\nimport { useState } from 'react';\n\nconst Discount = props => {\n  const product = useSelector(state => state.products.data);\n  const {\n    0: toggleToast,\n    1: toggleToastHandler\n  } = useState(false);\n  const {\n    0: toastText,\n    1: toastTextHandler\n  } = useState('');\n  const {\n    0: hasWon,\n    1: hasWonHandler\n  } = useState(false);\n  const {\n    0: guessMessage,\n    1: guessMessageHandler\n  } = useState(''); // console.log(product)\n\n  const formik = useFormik({\n    initialValues: {\n      guess: ''\n    },\n    onSubmit: async values => {\n      try {\n        const {\n          data\n        } = await axios({\n          method: 'post',\n          url: '/discounts',\n          data: {\n            guess: values.guess,\n            productId: product.id,\n            productName: product.title,\n            productPrice: product.variants[0].price\n          }\n        });\n        hasWonHandler(data.correct);\n        toggleToastHandler(true);\n        const amountOfTries = data.count;\n\n        if (data.correct) {\n          toastTextHandler('You have guessed the correct number, you will be redirected in 3 sec');\n          guessMessageHandler(data.message);\n          window.setTimeout(() => {\n            toggleToastHandler(false);\n          }, 2900);\n          window.setTimeout(() => {\n            window.location.assign(data.draftOrderUrl);\n          }, 3000);\n          return;\n        }\n\n        console.log('puppies');\n        guessMessageHandler(data.message);\n\n        if (amountOfTries >= 10) {\n          toastTextHandler('you have hit you maximum number of attempts, you will be redirected back to home in 5 seconds');\n          window.setTimeout(() => {\n            window.location.assign('/');\n          }, 5000);\n        } else {\n          toastTextHandler(`you have tried ${guessMessage} times you have ${10 - amountOfTries}`);\n        }\n\n        window.setTimeout(() => {\n          toggleToastHandler(false);\n        }, 2900);\n        console.log(data);\n      } catch (err) {\n        console.log('on submit error');\n        console.log(err.message);\n      }\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(styles.toast, {\n      show: toggleToast,\n      color: hasWon,\n      children: [hasWon && /*#__PURE__*/_jsxDEV(content.ToastText, {\n        heading: guessMessage,\n        message: toastText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 18\n      }, this), !hasWon && /*#__PURE__*/_jsxDEV(content.ToastText, {\n        heading: guessMessage,\n        message: toastText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(styles.Discount, {\n      children: /*#__PURE__*/_jsxDEV(styles.backgroundGraphic, {\n        children: [/*#__PURE__*/_jsxDEV(content.Graphic, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(styles.cardBody, {\n          children: [/*#__PURE__*/_jsxDEV(styles.discountTitle, {\n            children: \"what is the number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: formik.handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(styles.input, {\n              id: \"guess\",\n              name: \"guess\",\n              type: \"text\",\n              minLength: \"1\",\n              maxLength: \"4\",\n              placeholder: \"XXXX\",\n              onChange: formik.handleChange,\n              value: formik.values.guess\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(styles.buttonContainer, {\n              children: /*#__PURE__*/_jsxDEV(Buttons.Pill, {\n                type: \"submit\",\n                text: \"guess\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(styles.contestRules, {\n            children: \"Guess the correct number to appyly the shown discount. The number is between 1 - 1000, and you have 15 guesses for the correct answer.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\nexport default Discount;","map":{"version":3,"sources":["D:/files/school/react/shopify/demo_1/components/cards/Discount/index.js"],"names":["Buttons","content","styles","useFormik","useSelector","axios","useState","Discount","props","product","state","products","data","toggleToast","toggleToastHandler","toastText","toastTextHandler","hasWon","hasWonHandler","guessMessage","guessMessageHandler","formik","initialValues","guess","onSubmit","values","method","url","productId","id","productName","title","productPrice","variants","price","correct","amountOfTries","count","message","window","setTimeout","location","assign","draftOrderUrl","console","log","err","handleSubmit","handleChange"],"mappings":"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","sourcesContent":["import { Buttons } from '../../'\r\nimport content from './content'\r\nimport styles from './styles'\r\nimport { useFormik } from 'formik';\r\nimport { useSelector } from 'react-redux'\r\nimport axios from 'axios'\r\nimport { useState } from 'react'\r\n\r\nconst Discount = (props) => {\r\n\r\n  const product = useSelector(state => state.products.data)\r\n  const [toggleToast, toggleToastHandler] = useState(false)\r\n  const [toastText, toastTextHandler] = useState('')\r\n  const [hasWon, hasWonHandler] = useState(false)\r\n  const [guessMessage, guessMessageHandler] = useState('')\r\n\r\n  // console.log(product)\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      guess: '',\r\n    },\r\n    onSubmit: async values => {\r\n      try {\r\n        \r\n        const { data } = await axios({\r\n          method: 'post',\r\n          url: '/discounts',\r\n          data: {\r\n            guess: values.guess,\r\n            productId: product.id,\r\n            productName: product.title,\r\n            productPrice: product.variants[0].price\r\n          }\r\n        })\r\n        hasWonHandler(data.correct)\r\n        toggleToastHandler(true)\r\n        const amountOfTries = data.count\r\n\r\n        if (data.correct) {\r\n          toastTextHandler('You have guessed the correct number, you will be redirected in 3 sec')\r\n          guessMessageHandler(data.message)\r\n          window.setTimeout(() => {\r\n            toggleToastHandler(false)\r\n          }, 2900)\r\n\r\n          window.setTimeout(() => {\r\n            window.location.assign(data.draftOrderUrl)\r\n          }, 3000)\r\n\r\n          return\r\n        }\r\n        \r\n        console.log('puppies')\r\n        guessMessageHandler(data.message)\r\n        if (amountOfTries >= 10) {\r\n          toastTextHandler('you have hit you maximum number of attempts, you will be redirected back to home in 5 seconds')\r\n          window.setTimeout(() => {\r\n            window.location.assign('/')\r\n          }, 5000)\r\n        } else {\r\n          toastTextHandler(`you have tried ${guessMessage} times you have ${10 - amountOfTries}`)\r\n        }\r\n\r\n        window.setTimeout(() => {\r\n          toggleToastHandler(false)\r\n        }, 2900)\r\n        console.log(data)\r\n\r\n        \r\n        \r\n      } catch (err) {\r\n        console.log('on submit error')\r\n        console.log(err.message)\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n    <styles.toast \r\n      show={toggleToast}\r\n      color={hasWon}\r\n    >\r\n      {hasWon && <content.ToastText heading={guessMessage} message={toastText} />}\r\n      {!hasWon && <content.ToastText heading={guessMessage} message={toastText} />}\r\n    </styles.toast>\r\n    <styles.Discount>\r\n      <styles.backgroundGraphic>\r\n        <content.Graphic />\r\n        <styles.cardBody>\r\n          <styles.discountTitle>\r\n            what is the number\r\n          </styles.discountTitle>\r\n          <form onSubmit={formik.handleSubmit}>\r\n            <styles.input \r\n              id='guess'\r\n              name='guess'\r\n              type='text'\r\n              minLength='1'\r\n              maxLength='4'\r\n              placeholder='XXXX'\r\n              onChange={formik.handleChange}\r\n              value={formik.values.guess}\r\n            />\r\n            <styles.buttonContainer>\r\n              <Buttons.Pill \r\n                type='submit'\r\n                text='guess'\r\n              />\r\n            </styles.buttonContainer>\r\n          </form>\r\n          <styles.contestRules>\r\n            Guess the correct number to appyly the shown discount. The number is between 1 - 1000, and you have 15 guesses for the correct answer.\r\n          </styles.contestRules>\r\n        </styles.cardBody>\r\n      </styles.backgroundGraphic>\r\n    </styles.Discount>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Discount"]},"metadata":{},"sourceType":"module"}